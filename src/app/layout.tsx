import './globals.scss'
import type { Metadata } from 'next'
import { Roboto_Slab } from 'next/font/google'
import styles from './layout.module.css'
import { UserThemeProvider } from '@/lib/context'
import dynamic from 'next/dynamic'
import { AppRouterCacheProvider } from '@mui/material-nextjs/v13-appRouter'
import { AxiomWebVitals } from 'next-axiom'
import { Background } from './components/background/background'

const robotoFlex = Roboto_Slab({ subsets: ['latin'], display: 'swap' })

export const metadata: Metadata = {
    title: 'Drizzle',
    description: 'Generated by create next app',
}

const NavBar = dynamic(() => import('./components/navbar/navbar'), {
    ssr: false,
})

export default function RootLayout({
    children,
}: {
    children: React.ReactNode
}) {
    return (
        <html
            lang="en"
            className={robotoFlex.className + ' ' + styles.html}
            suppressHydrationWarning
        >
            <AxiomWebVitals />
            <body className={styles.body}>
                <AppRouterCacheProvider>
                    <UserThemeProvider>
                        <NavBar />
                        <main className={styles.main}>{children}</main>
                        <Background />
                    </UserThemeProvider>
                </AppRouterCacheProvider>
            </body>
        </html>
    )
}
